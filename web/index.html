<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <meta name="description" content="Scan ingredient labels to check if they're safe for celiac disease">
  <meta name="theme-color" content="#2d7d46">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="default">
  <meta name="apple-mobile-web-app-title" content="GlutenOrNot">

  <title>GlutenOrNot</title>

  <link rel="manifest" href="/manifest.json">
  <link rel="icon" type="image/svg+xml" href="/assets/icons/icon.svg">
  <link rel="apple-touch-icon" href="/assets/icons/icon.svg">
  <link rel="stylesheet" href="/css/styles.css">
</head>
<body>
  <div id="app">
    <!-- Header -->
    <header class="header">
      <h1 class="logo">Gluten<span class="logo-accent">Or</span>Not</h1>
    </header>

    <!-- Main Content Area -->
    <main class="main">
      <!-- Ready State -->
      <section id="state-ready" class="state active">
        <div id="drop-zone" class="drop-zone">
          <div class="ready-content">
            <div class="icon-container">
              <svg class="scan-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <rect x="3" y="3" width="18" height="18" rx="2"/>
                <line x1="9" y1="3" x2="9" y2="21"/>
                <line x1="15" y1="3" x2="15" y2="21"/>
                <line x1="3" y1="9" x2="21" y2="9"/>
                <line x1="3" y1="15" x2="21" y2="15"/>
              </svg>
            </div>
            <p class="ready-text">
              <span class="mobile-text">Take a photo of an ingredient label to check if it's safe</span>
              <span class="desktop-text">Drop an image here, paste from clipboard, or upload a photo</span>
            </p>
            <label class="scan-button" for="camera-input">
              <svg class="button-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"/>
                <circle cx="12" cy="13" r="4"/>
              </svg>
              <span class="mobile-text">Scan Label</span>
              <span class="desktop-text">Upload Image</span>
            </label>
            <input type="file" id="camera-input" accept="image/*" hidden>
            <div class="trust-notes">
              <p class="trust-note">
                <svg class="trust-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <rect x="3" y="11" width="18" height="11" rx="2" ry="2"/>
                  <path d="M7 11V7a5 5 0 0 1 10 0v4"/>
                </svg>
                Privacy first â€” your photos are never stored
              </p>
              <p class="trust-note">
                <svg class="trust-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <circle cx="12" cy="12" r="10"/>
                  <path d="M9 12l2 2 4-4"/>
                </svg>
                Free forever. No sign-up required.
              </p>
            </div>
          </div>
          <div class="drop-overlay">
            <div class="drop-overlay-content">
              <svg class="drop-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
                <polyline points="17 8 12 3 7 8"/>
                <line x1="12" y1="3" x2="12" y2="15"/>
              </svg>
              <span>Drop image here</span>
            </div>
          </div>
        </div>
      </section>

      <!-- Processing State -->
      <section id="state-processing" class="state">
        <div class="processing-content">
          <div class="spinner"></div>
          <p class="processing-text">Analyzing...</p>
        </div>
      </section>

      <!-- Result State -->
      <section id="state-result" class="state">
        <div class="result-content">
          <div id="result-card" class="result-card">
            <img id="result-thumbnail" class="result-thumbnail" alt="Scanned label" style="display: none;">
            <div class="verdict-badge" id="verdict-badge">
              <span class="verdict-icon" id="verdict-icon"></span>
              <span class="verdict-text" id="verdict-text"></span>
            </div>

            <div class="result-details">
              <div id="flagged-section" class="flagged-section">
                <h3 class="section-title">Flagged Ingredients</h3>
                <ul id="flagged-list" class="flagged-list"></ul>
              </div>

              <div id="warnings-section" class="warnings-section">
                <h3 class="section-title">Allergen Warnings</h3>
                <ul id="warnings-list" class="warnings-list"></ul>
              </div>

              <div class="explanation-section">
                <p id="explanation-text" class="explanation-text"></p>
              </div>

              <div id="confidence-section" class="confidence-section">
                <span class="confidence-label">Confidence:</span>
                <span id="confidence-value" class="confidence-value"></span>
              </div>
            </div>
          </div>

          <button id="scan-again-btn" class="scan-button secondary">
            <svg class="button-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"/>
              <circle cx="12" cy="13" r="4"/>
            </svg>
            Scan Another
          </button>
        </div>
      </section>

      <!-- Error State -->
      <section id="state-error" class="state">
        <div class="error-content">
          <div class="error-icon">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <circle cx="12" cy="12" r="10"/>
              <line x1="12" y1="8" x2="12" y2="12"/>
              <line x1="12" y1="16" x2="12.01" y2="16"/>
            </svg>
          </div>
          <h2 class="error-title" id="error-title">Something went wrong</h2>
          <p class="error-message" id="error-message">Please try again.</p>
          <button id="retry-btn" class="scan-button">Try Again</button>
        </div>
      </section>

      <!-- Offline State -->
      <section id="state-offline" class="state">
        <div class="offline-content">
          <div class="offline-icon">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <line x1="1" y1="1" x2="23" y2="23"/>
              <path d="M16.72 11.06A10.94 10.94 0 0 1 19 12.55"/>
              <path d="M5 12.55a10.94 10.94 0 0 1 5.17-2.39"/>
              <path d="M10.71 5.05A16 16 0 0 1 22.58 9"/>
              <path d="M1.42 9a15.91 15.91 0 0 1 4.7-2.88"/>
              <path d="M8.53 16.11a6 6 0 0 1 6.95 0"/>
              <line x1="12" y1="20" x2="12.01" y2="20"/>
            </svg>
          </div>
          <h2 class="offline-title">You're Offline</h2>
          <p class="offline-message">Connect to the internet to scan labels.</p>
        </div>
      </section>
    </main>

    <!-- Footer -->
    <footer class="footer">
      <button id="about-btn" class="footer-link">About</button>
      <span class="footer-divider">|</span>
      <span class="scan-counter" id="scan-counter"></span>
    </footer>

    <!-- About Modal -->
    <div id="about-modal" class="modal" hidden>
      <div class="modal-backdrop"></div>
      <div class="modal-content">
        <button class="modal-close" id="modal-close">&times;</button>
        <h2>About GlutenOrNot</h2>
        <p>A free tool to help people with celiac disease quickly check if ingredients are safe.</p>
        <h3>How it works</h3>
        <ol>
          <li>Take a photo of the ingredient label</li>
          <li>AI reads and analyzes the ingredients</li>
          <li>Get a safety verdict: safe, caution, or unsafe</li>
        </ol>
        <h3>Important</h3>
        <p>This tool is for informational purposes only. Always verify with the manufacturer if unsure. When in doubt, leave it out.</p>
        <h3>Verdicts</h3>
        <ul>
          <li><strong>Safe:</strong> No gluten-containing or ambiguous ingredients detected</li>
          <li><strong>Caution:</strong> Contains ambiguous ingredients or "may contain" warnings</li>
          <li><strong>Unsafe:</strong> Contains wheat, barley, rye, or their derivatives</li>
        </ul>
        <p class="about-footer">
          <a href="https://github.com/amr05008/glutenornot.com" target="_blank" rel="noopener">Open Source</a> |
          Made with care for the celiac community
        </p>
      </div>
    </div>
  </div>

  <script type="module" src="/js/app.js"></script>
  <script defer src="/_vercel/insights/script.js"></script>
</body>
</html>
